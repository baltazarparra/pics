(window.webpackJsonppics=window.webpackJsonppics||[]).push([[0],{196:function(e,n,t){e.exports=t(396)},384:function(e,n,t){"use strict";e.exports={fragment:{argumentDefinitions:[{kind:"LocalArgument",name:"input",type:"DeletePostInput!",defaultValue:null}],kind:"Fragment",metadata:null,name:"DeletePostMutation",selections:[{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"input",variableName:"input",type:"DeletePostInput!"}],concreteType:"DeletePostPayload",name:"deletePost",plural:!1,selections:[{kind:"ScalarField",alias:null,args:null,name:"deletedId",storageKey:null}],storageKey:null}],type:"Mutation"},id:null,kind:"Batch",metadata:{},name:"DeletePostMutation",query:{argumentDefinitions:[{kind:"LocalArgument",name:"input",type:"DeletePostInput!",defaultValue:null}],kind:"Root",name:"DeletePostMutation",operation:"mutation",selections:[{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"input",variableName:"input",type:"DeletePostInput!"}],concreteType:"DeletePostPayload",name:"deletePost",plural:!1,selections:[{kind:"ScalarField",alias:null,args:null,name:"deletedId",storageKey:null}],storageKey:null}]},text:"mutation DeletePostMutation(\n  $input: DeletePostInput!\n) {\n  deletePost(input: $input) {\n    deletedId\n  }\n}\n"}},385:function(e,n,t){"use strict";e.exports={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Post_viewer",selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],type:"Viewer"}},386:function(e,n,t){"use strict";e.exports={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Post_post",selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"description",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"imageUrl",storageKey:null}],type:"Post"}},392:function(e,n,t){"use strict";e.exports={argumentDefinitions:[],kind:"Fragment",metadata:{connection:[{count:null,cursor:null,direction:"backward",path:["allPosts"]}]},name:"ListPage_viewer",selections:[{kind:"FragmentSpread",name:"Post_viewer",args:null},{kind:"LinkedField",alias:"allPosts",args:null,concreteType:"PostConnection",name:"__ListPage_allPosts_connection",plural:!1,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"PostEdge",name:"edges",plural:!0,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Post",name:"node",plural:!1,selections:[{kind:"FragmentSpread",name:"Post_post",args:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Viewer"}},393:function(e,n,t){"use strict";e.exports={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AppAllPostQuery",selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Viewer",name:"viewer",plural:!1,selections:[{kind:"FragmentSpread",name:"ListPage_viewer",args:null}],storageKey:null}],type:"Query"},id:null,kind:"Batch",metadata:{},name:"AppAllPostQuery",query:{argumentDefinitions:[],kind:"Root",name:"AppAllPostQuery",operation:"query",selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Viewer",name:"viewer",plural:!1,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"InlineFragment",type:"Viewer",selections:[{kind:"LinkedField",alias:null,args:[{kind:"Literal",name:"last",value:100,type:"Int"},{kind:"Literal",name:"orderBy",value:"createdAt_DESC",type:"PostOrderBy"}],concreteType:"PostConnection",name:"allPosts",plural:!1,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"PostEdge",name:"edges",plural:!0,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Post",name:"node",plural:!1,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"description",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"imageUrl",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"cursor",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"PageInfo",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,args:null,name:"endCursor",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"hasNextPage",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"hasPreviousPage",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"startCursor",storageKey:null}],storageKey:null}],storageKey:'allPosts{"last":100,"orderBy":"createdAt_DESC"}'},{kind:"LinkedHandle",alias:null,args:[{kind:"Literal",name:"last",value:100,type:"Int"},{kind:"Literal",name:"orderBy",value:"createdAt_DESC",type:"PostOrderBy"}],handle:"connection",name:"allPosts",key:"ListPage_allPosts",filters:[]}]}],storageKey:null}]},text:"query AppAllPostQuery {\n  viewer {\n    ...ListPage_viewer\n    id\n  }\n}\n\nfragment ListPage_viewer on Viewer {\n  ...Post_viewer\n  allPosts(last: 100, orderBy: createdAt_DESC) {\n    edges {\n      node {\n        ...Post_post\n        id\n        __typename\n      }\n      cursor\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n      hasPreviousPage\n      startCursor\n    }\n  }\n}\n\nfragment Post_viewer on Viewer {\n  id\n}\n\nfragment Post_post on Post {\n  id\n  description\n  imageUrl\n}\n"}},394:function(e,n,t){"use strict";e.exports={fragment:{argumentDefinitions:[{kind:"LocalArgument",name:"input",type:"CreatePostInput!",defaultValue:null}],kind:"Fragment",metadata:null,name:"CreatePostMutation",selections:[{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"input",variableName:"input",type:"CreatePostInput!"}],concreteType:"CreatePostPayload",name:"createPost",plural:!1,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Post",name:"post",plural:!1,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"description",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"imageUrl",storageKey:null}],storageKey:null}],storageKey:null}],type:"Mutation"},id:null,kind:"Batch",metadata:{},name:"CreatePostMutation",query:{argumentDefinitions:[{kind:"LocalArgument",name:"input",type:"CreatePostInput!",defaultValue:null}],kind:"Root",name:"CreatePostMutation",operation:"mutation",selections:[{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"input",variableName:"input",type:"CreatePostInput!"}],concreteType:"CreatePostPayload",name:"createPost",plural:!1,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Post",name:"post",plural:!1,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"description",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"imageUrl",storageKey:null}],storageKey:null}],storageKey:null}]},text:"mutation CreatePostMutation(\n  $input: CreatePostInput!\n) {\n  createPost(input: $input) {\n    post {\n      id\n      description\n      imageUrl\n    }\n  }\n}\n"}},395:function(e,n,t){"use strict";e.exports={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CreatePageViewerQuery",selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Viewer",name:"viewer",plural:!1,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null}],type:"Query"},id:null,kind:"Batch",metadata:{},name:"CreatePageViewerQuery",query:{argumentDefinitions:[],kind:"Root",name:"CreatePageViewerQuery",operation:"query",selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Viewer",name:"viewer",plural:!1,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null}]},text:"query CreatePageViewerQuery {\n  viewer {\n    id\n  }\n}\n"}},396:function(e,n,t){"use strict";t.r(n);var a=t(2),l=t.n(a),r=t(191),i=t.n(r),o=t(35),s=t(36),u=t(38),c=t(37),d=t(39),m=t(16),p=t(24),g=t(24),y=g.Environment,k=g.Network,P=g.RecordSource,f=new(0,g.Store)(new P),v=new y({network:k.create(function(e,n){return fetch("https://api.graph.cool/relay/v1/cjzymojvd5cft0154i7hpc6dw",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({query:e.text,variables:n})}).then(function(e){return e.json()})}),store:f}),w=function(){return t(384)};var h=function(e){function n(){var e,t;Object(o.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(t=Object(u.a)(this,(e=Object(c.a)(n)).call.apply(e,[this].concat(l))))._handleDelete=function(){!function(e,n){var t={input:{id:e,clientMutationId:""}};Object(m.commitMutation)(v,{mutation:w,variables:t,onError:function(e){return console.error(e)},updater:function(e){var t=e.getRootField("deletePost").getValue("deletedId"),a=e.get(n),l=p.ConnectionHandler.getConnection(a,"ListPage_allPosts");p.ConnectionHandler.deleteNode(l,t)}})}(t.props.post.id,t.props.viewer.id)},t}return Object(d.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){return l.a.createElement("div",{className:"pa3 bg-black-05 ma3"},l.a.createElement("div",{className:"w-100",style:{backgroundImage:"url(".concat(this.props.post.imageUrl,")"),backgroundSize:"cover",paddingBottom:"100%"}}),l.a.createElement("div",{className:"pt3"},this.props.post.description,"\xa0",l.a.createElement("span",{className:"red f6 pointer dim",onClick:this._handleDelete},"Delete")))}}]),n}(l.a.Component),F=Object(m.createFragmentContainer)(h,{viewer:function(){return t(385)},post:function(){return t(386)}}),b=t(18),C=function(e){function n(){return Object(o.a)(this,n),Object(u.a)(this,Object(c.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"w-100 flex justify-center"},l.a.createElement(b.a,{to:"/create",className:"fixed bg-white top-0 right-0 pa4 ttu dim black no-underline"},"+ New Post"),l.a.createElement("div",{className:"w-100",style:{maxWidth:400}},this.props.viewer.allPosts.edges.map(function(n){var t=n.node;return l.a.createElement(F,{key:t.__id,post:t,viewer:e.props.viewer})})))}}]),n}(l.a.Component),K=Object(m.createFragmentContainer)(C,{viewer:function(){return t(392)}}),E=function(){return t(393)},L=function(e){function n(){return Object(o.a)(this,n),Object(u.a)(this,Object(c.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){return l.a.createElement(m.QueryRenderer,{environment:v,query:E,render:function(e){var n=e.error,t=e.props;return n?l.a.createElement("div",null,n.message):t?l.a.createElement(K,{viewer:t.viewer}):l.a.createElement("div",null,"Loading...")}})}}]),n}(a.Component),S=function(){return t(394)},_=0,j=function(e,n,t,a){var l={input:{description:e,imageUrl:n,clientMutationId:""}};Object(m.commitMutation)(v,{mutation:S,variables:l,optimisticUpdater:function(a){var l="client:newPost:"+_++,r=a.create(l,"Post");r.setValue(l,"id"),r.setValue(e,"description"),r.setValue(n,"imageUrl");var i=a.get(t),o=p.ConnectionHandler.getConnection(i,"ListPage_allPosts");o&&p.ConnectionHandler.insertEdgeAfter(o,r)},updater:function(e){var n=e.getRootField("createPost").getLinkedRecord("post"),a=e.get(t),l=p.ConnectionHandler.getConnection(a,"ListPage_allPosts");l&&p.ConnectionHandler.insertEdgeAfter(l,n)},onCompleted:function(){a()},onError:function(e){return console.error(e)}})},D=function(){return t(395)},O=function(e){function n(){var e,t;Object(o.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(t=Object(u.a)(this,(e=Object(c.a)(n)).call.apply(e,[this].concat(l)))).state={description:"",imageUrl:""},t._handlePost=function(e){var n=t.state,a=n.description,l=n.imageUrl;j(a,l,e,function(){return t.props.router.replace("/")})},t}return Object(d.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){var e=this;return l.a.createElement(m.QueryRenderer,{environment:v,query:D,render:function(n){var t=n.error,a=n.props;return t?l.a.createElement("div",null,t.message):a?l.a.createElement("div",{className:"w-100 pa4 flex justify-center"},l.a.createElement("div",{style:{maxWidth:400},className:""},l.a.createElement("input",{className:"w-100 pa3 mv2",value:e.state.description,placeholder:"Description",onChange:function(n){return e.setState({description:n.target.value})}}),l.a.createElement("input",{className:"w-100 pa3 mv2",value:e.state.imageUrl,placeholder:"Image Url",onChange:function(n){return e.setState({imageUrl:n.target.value})}}),e.state.imageUrl&&l.a.createElement("img",{src:e.state.imageUrl,alt:e.state.description,className:"w-100 mv3"}),e.state.description&&e.state.imageUrl&&l.a.createElement("button",{className:"pa3 bg-black-10 bn dim ttu pointer",onClick:function(){return e._handlePost(a.viewer.id)}},"Post"),l.a.createElement("div",{style:{textAlign:"center",color:"red"}},l.a.createElement(b.a,{to:"/"},"Cancel")))):l.a.createElement("div",null,"loading")}})}}]),n}(l.a.Component),I=Object(b.e)(O);i.a.render(l.a.createElement(b.c,{history:b.d},l.a.createElement(b.b,{path:"/",component:L}),l.a.createElement(b.b,{path:"/create",component:I})),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",function(){var e="".concat("/pics","/service-worker.js");navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})})}},[[196,1,2]]]);
//# sourceMappingURL=main.e2751459.chunk.js.map